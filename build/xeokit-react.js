module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=13)}([function(e,t){e.exports=require("react")},function(e,t,n){e.exports=n(10)()},function(e,t){e.exports=require("xeokit-sdk/src/viewer/Viewer")},function(e,t){e.exports=require("xeokit-sdk/src/plugins/BCFViewpointsPlugin/BCFViewpointsPlugin")},function(e,t){e.exports=require("xeokit-sdk/src/plugins/GLTFLoaderPlugin/GLTFLoaderPlugin")},function(e,t){e.exports=require("xeokit-sdk/src/plugins/XKTLoaderPlugin/XKTLoaderPlugin")},function(e,t){e.exports=require("xeokit-sdk/src/viewer/scene/math/math")},function(e,t,n){(function(t){var n=200,r="__lodash_hash_undefined__",o=9007199254740991,i="[object Arguments]",u="[object Function]",a="[object GeneratorFunction]",c=/^\[object .+?Constructor\]$/,s="object"==typeof t&&t&&t.Object===Object&&t,l="object"==typeof self&&self&&self.Object===Object&&self,f=s||l||Function("return this")();function p(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function d(e,t){return!!(e?e.length:0)&&function(e,t,n){if(t!=t)return function(e,t,n,r){var o=e.length,i=n+(r?1:-1);for(;r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}(e,y,n);var r=n-1,o=e.length;for(;++r<o;)if(e[r]===t)return r;return-1}(e,t,0)>-1}function h(e,t,n){for(var r=-1,o=e?e.length:0;++r<o;)if(n(t,e[r]))return!0;return!1}function v(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function y(e){return e!=e}function b(e,t){return e.has(t)}var g,m=Array.prototype,_=Function.prototype,w=Object.prototype,P=f["__core-js_shared__"],k=(g=/[^.]+$/.exec(P&&P.keys&&P.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"",O=_.toString,S=w.hasOwnProperty,j=w.toString,E=RegExp("^"+O.call(S).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=f.Symbol,C=w.propertyIsEnumerable,T=m.splice,V=x?x.isConcatSpreadable:void 0,I=Math.max,L=$(f,"Map"),A=$(Object,"create");function B(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function F(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function D(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function q(e){var t=-1,n=e?e.length:0;for(this.__data__=new D;++t<n;)this.add(e[t])}function R(e,t){for(var n,r,o=e.length;o--;)if((n=e[o][0])===(r=t)||n!=n&&r!=r)return o;return-1}function M(e,t,r,o){var i,u=-1,a=d,c=!0,s=e.length,l=[],f=t.length;if(!s)return l;r&&(t=function(e,t){for(var n=-1,r=e?e.length:0,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}(t,(i=r,function(e){return i(e)}))),o?(a=h,c=!1):t.length>=n&&(a=b,c=!1,t=new q(t));e:for(;++u<s;){var p=e[u],v=r?r(p):p;if(p=o||0!==p?p:0,c&&v==v){for(var y=f;y--;)if(t[y]===v)continue e;l.push(p)}else a(t,v,o)||l.push(p)}return l}function z(e){return!(!Q(e)||(t=e,k&&k in t))&&(J(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?E:c).test(function(e){if(null!=e){try{return O.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function N(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function $(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return z(n)?n:void 0}function G(e){return X(e)||function(e){return Y(e)&&S.call(e,"callee")&&(!C.call(e,"callee")||j.call(e)==i)}(e)||!!(V&&e&&e[V])}B.prototype.clear=function(){this.__data__=A?A(null):{}},B.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},B.prototype.get=function(e){var t=this.__data__;if(A){var n=t[e];return n===r?void 0:n}return S.call(t,e)?t[e]:void 0},B.prototype.has=function(e){var t=this.__data__;return A?void 0!==t[e]:S.call(t,e)},B.prototype.set=function(e,t){return this.__data__[e]=A&&void 0===t?r:t,this},F.prototype.clear=function(){this.__data__=[]},F.prototype.delete=function(e){var t=this.__data__,n=R(t,e);return!(n<0)&&(n==t.length-1?t.pop():T.call(t,n,1),!0)},F.prototype.get=function(e){var t=this.__data__,n=R(t,e);return n<0?void 0:t[n][1]},F.prototype.has=function(e){return R(this.__data__,e)>-1},F.prototype.set=function(e,t){var n=this.__data__,r=R(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},D.prototype.clear=function(){this.__data__={hash:new B,map:new(L||F),string:new B}},D.prototype.delete=function(e){return N(this,e).delete(e)},D.prototype.get=function(e){return N(this,e).get(e)},D.prototype.has=function(e){return N(this,e).has(e)},D.prototype.set=function(e,t){return N(this,e).set(e,t),this},q.prototype.add=q.prototype.push=function(e){return this.__data__.set(e,r),this},q.prototype.has=function(e){return this.__data__.has(e)};var U,W,K=(U=function(e,t){return Y(e)?M(e,function e(t,n,r,o,i){var u=-1,a=t.length;for(r||(r=G),i||(i=[]);++u<a;){var c=t[u];n>0&&r(c)?n>1?e(c,n-1,r,o,i):v(i,c):o||(i[i.length]=c)}return i}(t,1,Y,!0)):[]},W=I(void 0===W?U.length-1:W,0),function(){for(var e=arguments,t=-1,n=I(e.length-W,0),r=Array(n);++t<n;)r[t]=e[W+t];t=-1;for(var o=Array(W+1);++t<W;)o[t]=e[t];return o[W]=r,p(U,this,o)});var X=Array.isArray;function H(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}(e.length)&&!J(e)}function Y(e){return function(e){return!!e&&"object"==typeof e}(e)&&H(e)}function J(e){var t=Q(e)?j.call(e):"";return t==u||t==a}function Q(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=K}).call(this,n(12))},function(e,t){e.exports=require("xeokit-sdk/src/plugins/NavCubePlugin/NavCubePlugin")},function(e,t){e.exports=require("xeokit-sdk/src/plugins/SectionPlanesPlugin/SectionPlanesPlugin")},function(e,t,n){"use strict";var r=n(11);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,u){if(u!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(1),u=n.n(i),a=n(2),c=n(3),s=n(8),l=n(7),f=n.n(l);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){var t=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),h(this,v(n).apply(this,arguments))}var i,u,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(n,r["Component"]),i=n,(u=[{key:"componentDidMount",value:function(){var e=this.props,t=e.camera,n=e.bcfViewpoint;this.setUpViewer(),t&&this.setCamera(),this.loadPlugins();var r=this.loadModels();n&&this.setBCFViewpoints(r),this.pickEntity()}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props;if(e.models!==n.models){var r=f()(n.models,e.models),o=f()(e.models,n.models),i=r.map(function(e){return t.modelLoader.load(e)});n.bcfViewpoint&&this.setBCFViewpoints(i),o.forEach(function(e){var n=e.id;t.viewer.scene.models[n].destroy()})}}},{key:"componentWillUnmount",value:function(){this.viewer.destroy()}},{key:"setUpViewer",value:function(){var e=this.props.canvasID;this.viewer=new a.Viewer({canvasId:e})}},{key:"setCamera",value:function(){var e=this.viewer.scene.camera,t=this.props.camera,n=t.eye,r=t.look,o=t.up,i=t.zoom;e.eye=n,e.look=r,e.up=o,e.zoom(i)}},{key:"setBCFViewpoints",value:function(e){var t=this,n=this.props.bcfViewpoint,r=e.map(function(e){return new Promise(function(t){return e.on("loaded",t)})});Promise.all(r).then(function(){return t.BCFViewpointsPlugin.setViewpoint(n)})}},{key:"loadModels",value:function(){var e=this;return this.props.models.map(function(t){return e.modelLoader.load(t)})}},{key:"loadPlugins",value:function(){var t=this.props,n=t.bcfViewpoint,r=t.navCubeSettings;this.modelLoader=new e(this.viewer),n&&(this.BCFViewpointsPlugin=new c.BCFViewpointsPlugin(this.viewer)),r&&new s.NavCubePlugin(this.viewer,r)}},{key:"pickEntity",value:function(){var e=this.props.eventToPickOn,t=null,n=null,r=this.viewer.scene;r.input.on(e,function(e){var o=r.pick({canvasPos:e});o?(console.log(o.entity.id),t&&o.entity.id===t.id||(t&&(t.colorize=n),t=o.entity,n=o.entity.colorize.slice(),o.entity.colorize=[0,1,0])):t&&(t.colorize=n,t=null)})}},{key:"takeScreenshot",value:function(){var e=this.viewer.getSnapshot({format:"png"}),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","model-screenshot"),t.click()}},{key:"render",value:function(){var e=this,t=this.props,n=t.canvasID,r=t.width,i=t.height,u=t.navCubeSettings,a=t.enableScreenshot;return o.a.createElement("div",null,o.a.createElement("canvas",{id:n,width:r,height:i,className:"d-block mx-auto border border-secondary m-3 mw-100"}),u?o.a.createElement("canvas",{id:u.canvasId,width:u.canvasWidth,height:u.canvasHeight,className:"d-block mx-auto mw-100"}):null,a?o.a.createElement("button",{type:"button",id:"take-screenshot",className:"btn btn-primary",onClick:function(){return e.takeScreenshot()}},"Take Screenshot"):null)}}])&&d(i.prototype,u),l&&d(i,l),n}();return t.propTypes={canvasID:u.a.string.isRequired,width:u.a.number,height:u.a.number,camera:u.a.object,models:u.a.arrayOf(u.a.shape({id:u.a.string.isRequired,src:u.a.string.isRequired})).isRequired,bcfViewpoint:u.a.object,eventToPickOn:u.a.string,navCubeSettings:u.a.shape({canvasId:u.a.string.isRequired,canvasWidth:u.a.number,canvasHeight:u.a.number}),enableScreenshot:u.a.bool},t.defaultProps={eventToPickOn:"mouseclicked"},t},g=n(4),m=n(5),_=b(g.GLTFLoaderPlugin),w=b(m.XKTLoaderPlugin),P=n(6),k=function(e,t,n){var r=null,o=null,i=e.scene;i.input.on(t,function(e){var t=i.pick({canvasPos:e});t?(console.log(t.entity.id),n(t.entity.id),r&&t.entity.id===r.id||(r&&(r.colorize=o),r=t.entity,o=t.entity.colorize.slice(),t.entity.colorize=[0,1,0])):r&&(r.colorize=o,r=null,n(null))})},O=function(e,t){var n=e.scene.camera;Object.keys(t).forEach(function(e){var r=n[e],o=t[e];"function"==typeof r?r.call(n,o):n[e]=o})},S={gltf:g.GLTFLoaderPlugin,xkt:m.XKTLoaderPlugin},j=function(e){return S[function(e){var t=e.match(/\.(\w+)$/);return t&&t[1].toLowerCase()}(e)]},E=[{label:"front",boundaries:[[7,7,4,4]],dir:[0,0,-1],up:[0,1,0]},{label:"back",boundaries:[[19,7,4,4]],dir:[0,0,1],up:[0,1,0]},{label:"right",boundaries:[[13,7,4,4]],dir:[-1,0,0],up:[0,1,0]},{label:"left",boundaries:[[1,7,4,4]],dir:[1,0,0],up:[0,1,0]},{label:"top",boundaries:[[7,1,4,4]],dir:[0,-1,0],up:[0,0,-1]},{label:"bottom",boundaries:[[7,13,4,4]],dir:[0,1,0],up:[0,0,1]}],x=n(9);function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var T=function(e){return"DISABLED"!==e},V=function(e){return T(e)?"DISABLED":"VISIBLE"},I=function(e){return"VISIBLE"===e?"HIDDEN":"VISIBLE"},L={id:"mySectionPlane",pos:[0,0,0],dir:[0,0,1]},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L,n=Object(r.useState)("DISABLED"),o=C(n,2),i=o[0],u=o[1];return Object(r.useEffect)(function(){return function(){e&&e.scene.sectionPlanes&&e.scene.sectionPlanes[t.id]&&e.scene.sectionPlanes[t.id].destroy()}},[e,t]),Object(r.useEffect)(function(){if(e){var n=e.scene.sectionPlanes[t.id];if("DISABLED"===i)n&&n.destroy();else{var r=e.plugins.SectionPlanes||new x.SectionPlanesPlugin(e);n||r.createSectionPlane(t),"VISIBLE"===i?r.showControl(t.id):r.hideControl()}}},[e,i,t]),{enabled:T(i),toggleStatus:function(){return u(V)},toggleVisibility:function(){return u(I)}}};function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.bcfViewpoint,o=t.eventToPickOn,i=void 0===o?"mouseclicked":o,u=t.camera,s=t.sectionPlane,l=Object(r.useState)(null),f=B(l,2),p=f[0],d=f[1],h=Object(r.useState)(!1),v=B(h,2),y=v[0],b=v[1],g=Object(r.useState)(null),m=B(g,2),_=m[0],w=m[1],S=Object(r.useState)([]),x=B(S,2),C=x[0],T=x[1],V=Object(r.useRef)(),I=A(V.current,s),L=Object(r.useMemo)(function(){return{ref:d}},[d]),F=function(){if(V.current){var e=V.current.getSnapshot({format:"png"}),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","model-screenshot"),t.click()}},D=Object(r.useCallback)(function(e){V.current&&y&&(V.current.plugins.BCFViewpoints||new c.BCFViewpointsPlugin(V.current)).setViewpoint(e)},[y]),q=function(e){var t=E.find(function(t){return t.label===e});if(y){var n=P.math.vec3(),r=V.current.scene.aabb,o=P.math.getAABB3Diag(r);P.math.getAABB3Center(r,n);var i=Math.abs(o/Math.tan(27.5));V.current.cameraFlight.flyTo({look:n,eye:[n[0]-i*t.dir[0],n[1]-i*t.dir[1],n[2]-i*t.dir[2]],up:t.up||[0,1,0],orthoScale:1.3*o,fitFOV:45,duration:.5})}};return Object(r.useEffect)(function(){if(p){V.current=new a.Viewer({canvasElement:p});var t=e.map(function(e){return new Promise(function(t){var n=j(e.src);n?(V.current.plugins[n.name]||new n(V.current,{id:n.name})).load(e).on("loaded",t):t()})});Promise.all(t).then(function(){return b(!0)}),k(V.current,i,w)}return function(){p&&(b(!1),w(null),V.current.destroy())}},[p,e,i]),Object(r.useEffect)(function(){n&&D(n)},[n,D]),Object(r.useEffect)(function(){V.current&&u&&O(V.current,u)},[u,p]),Object(r.useEffect)(function(){if(!u&&!n&&y){var t=V.current.scene.models[e[0].id];t&&V.current.cameraFlight.flyTo(t)}},[e,y,u,n]),Object(r.useEffect)(function(){var e=E.map(function(e){return e.label});T(e)},[T]),{viewerCanvasProps:L,takeScreenshot:F,setBcfViewpoint:D,pickedEntityID:_,faces:C,setCameraPreset:q,sectionPlanesControl:I}};n.d(t,"GLTFViewer",function(){return _}),n.d(t,"XKTViewer",function(){return w}),n.d(t,"useViewer",function(){return F})}]);