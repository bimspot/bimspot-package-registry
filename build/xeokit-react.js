module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t){e.exports=require("react")},function(e,t,n){e.exports=n(9)()},function(e,t){e.exports=require("@xeokit/xeokit-sdk/src/viewer/scene/math/math")},function(e,t,n){(function(t){var n=/^\[object .+?Constructor\]$/,r="object"==typeof t&&t&&t.Object===Object&&t,o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();function u(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function a(e,t){return!!(e?e.length:0)&&function(e,t,n){if(t!=t)return function(e,t,n,r){var o=e.length,i=n+(r?1:-1);for(;r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}(e,s,n);var r=n-1,o=e.length;for(;++r<o;)if(e[r]===t)return r;return-1}(e,t,0)>-1}function c(e,t,n){for(var r=-1,o=e?e.length:0;++r<o;)if(n(t,e[r]))return!0;return!1}function l(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function s(e){return e!=e}function f(e,t){return e.has(t)}var d,p=Array.prototype,h=Function.prototype,v=Object.prototype,b=i["__core-js_shared__"],y=(d=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",m=h.toString,g=v.hasOwnProperty,_=v.toString,O=RegExp("^"+m.call(g).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),j=i.Symbol,w=v.propertyIsEnumerable,k=p.splice,S=j?j.isConcatSpreadable:void 0,P=Math.max,x=B(i,"Map"),C=B(Object,"create");function E(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function A(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function T(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function I(e){var t=-1,n=e?e.length:0;for(this.__data__=new T;++t<n;)this.add(e[t])}function V(e,t){for(var n,r,o=e.length;o--;)if((n=e[o][0])===(r=t)||n!=n&&r!=r)return o;return-1}function M(e,t,n,r){var o,i=-1,u=a,l=!0,s=e.length,d=[],p=t.length;if(!s)return d;n&&(t=function(e,t){for(var n=-1,r=e?e.length:0,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}(t,(o=n,function(e){return o(e)}))),r?(u=c,l=!1):t.length>=200&&(u=f,l=!1,t=new I(t));e:for(;++i<s;){var h=e[i],v=n?n(h):h;if(h=r||0!==h?h:0,l&&v==v){for(var b=p;b--;)if(t[b]===v)continue e;d.push(h)}else u(t,v,r)||d.push(h)}return d}function R(e){return!(!G(e)||(t=e,y&&y in t))&&(X(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?O:n).test(function(e){if(null!=e){try{return m.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function F(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function B(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return R(n)?n:void 0}function L(e){return N(e)||function(e){return z(e)&&g.call(e,"callee")&&(!w.call(e,"callee")||"[object Arguments]"==_.call(e))}(e)||!!(S&&e&&e[S])}E.prototype.clear=function(){this.__data__=C?C(null):{}},E.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},E.prototype.get=function(e){var t=this.__data__;if(C){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return g.call(t,e)?t[e]:void 0},E.prototype.has=function(e){var t=this.__data__;return C?void 0!==t[e]:g.call(t,e)},E.prototype.set=function(e,t){return this.__data__[e]=C&&void 0===t?"__lodash_hash_undefined__":t,this},A.prototype.clear=function(){this.__data__=[]},A.prototype.delete=function(e){var t=this.__data__,n=V(t,e);return!(n<0)&&(n==t.length-1?t.pop():k.call(t,n,1),!0)},A.prototype.get=function(e){var t=this.__data__,n=V(t,e);return n<0?void 0:t[n][1]},A.prototype.has=function(e){return V(this.__data__,e)>-1},A.prototype.set=function(e,t){var n=this.__data__,r=V(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},T.prototype.clear=function(){this.__data__={hash:new E,map:new(x||A),string:new E}},T.prototype.delete=function(e){return F(this,e).delete(e)},T.prototype.get=function(e){return F(this,e).get(e)},T.prototype.has=function(e){return F(this,e).has(e)},T.prototype.set=function(e,t){return F(this,e).set(e,t),this},I.prototype.add=I.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},I.prototype.has=function(e){return this.__data__.has(e)};var D,q,$=(D=function(e,t){return z(e)?M(e,function e(t,n,r,o,i){var u=-1,a=t.length;for(r||(r=L),i||(i=[]);++u<a;){var c=t[u];n>0&&r(c)?n>1?e(c,n-1,r,o,i):l(i,c):o||(i[i.length]=c)}return i}(t,1,z,!0)):[]},q=P(void 0===q?D.length-1:q,0),function(){for(var e=arguments,t=-1,n=P(e.length-q,0),r=Array(n);++t<n;)r[t]=e[q+t];t=-1;for(var o=Array(q+1);++t<q;)o[t]=e[t];return o[q]=r,u(D,this,o)});var N=Array.isArray;function U(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!X(e)}function z(e){return function(e){return!!e&&"object"==typeof e}(e)&&U(e)}function X(e){var t=G(e)?_.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}function G(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=$}).call(this,n(11))},function(e,t){e.exports=require("@xeokit/xeokit-sdk/src/viewer/Viewer")},function(e,t){e.exports=require("@xeokit/xeokit-sdk/src/plugins/NavCubePlugin/NavCubePlugin")},function(e,t){e.exports=require("@xeokit/xeokit-sdk/src/plugins/GLTFLoaderPlugin/GLTFLoaderPlugin")},function(e,t){e.exports=require("@xeokit/xeokit-sdk/src/plugins/XKTLoaderPlugin/XKTLoaderPlugin")},function(e,t){e.exports=require("@xeokit/xeokit-sdk/src/plugins/BCFViewpointsPlugin/BCFViewpointsPlugin")},function(e,t,n){"use strict";var r=n(10);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,u){if(u!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t),n.d(t,"GLTFViewer",(function(){return j})),n.d(t,"XKTViewer",(function(){return w})),n.d(t,"useViewer",(function(){return Y}));var r=n(0),o=n.n(r),i=n(1),u=n.n(i),a=n(4),c=n(8),l=n(5),s=n(3),f=n.n(s);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){var t=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(s,t);var n,r,i,u=b(s);function s(){return p(this,s),u.apply(this,arguments)}return n=s,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.camera,n=e.bcfViewpoint;this.setUpViewer(),t&&this.setCamera(),this.loadPlugins();var r=this.loadModels();n&&this.setBCFViewpoints(r),this.pickEntity()}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props;if(e.models!==n.models){var r=f()(n.models,e.models),o=f()(e.models,n.models),i=r.map((function(e){return t.modelLoader.load(e)}));n.bcfViewpoint&&this.setBCFViewpoints(i),o.forEach((function(e){var n=e.id;t.viewer.scene.models[n].destroy()}))}}},{key:"componentWillUnmount",value:function(){this.viewer.destroy()}},{key:"setUpViewer",value:function(){var e=this.props.canvasID;this.viewer=new a.Viewer({canvasId:e})}},{key:"setCamera",value:function(){var e=this.viewer.scene.camera,t=this.props.camera,n=t.eye,r=t.look,o=t.up,i=t.zoom;e.eye=n,e.look=r,e.up=o,e.zoom(i)}},{key:"setBCFViewpoints",value:function(e){var t=this,n=this.props.bcfViewpoint,r=e.map((function(e){return new Promise((function(t){return e.on("loaded",t)}))}));Promise.all(r).then((function(){return t.BCFViewpointsPlugin.setViewpoint(n)}))}},{key:"loadModels",value:function(){var e=this;return this.props.models.map((function(t){return e.modelLoader.load(t)}))}},{key:"loadPlugins",value:function(){var t=this.props,n=t.bcfViewpoint,r=t.navCubeSettings;this.modelLoader=new e(this.viewer),n&&(this.BCFViewpointsPlugin=new c.BCFViewpointsPlugin(this.viewer)),r&&new l.NavCubePlugin(this.viewer,r)}},{key:"pickEntity",value:function(){var e=this.props.eventToPickOn,t=null,n=null,r=this.viewer.scene;r.input.on(e,(function(e){var o=r.pick({canvasPos:e});o?(console.log(o.entity.id),t&&o.entity.id===t.id||(t&&(t.colorize=n),t=o.entity,n=o.entity.colorize.slice(),o.entity.colorize=[0,1,0])):t&&(t.colorize=n,t=null)}))}},{key:"takeScreenshot",value:function(){var e=this.viewer.getSnapshot({format:"png"}),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","model-screenshot"),t.click()}},{key:"render",value:function(){var e=this,t=this.props,n=t.canvasID,r=t.width,i=t.height,u=t.navCubeSettings,a=t.enableScreenshot;return o.a.createElement("div",null,o.a.createElement("canvas",{id:n,width:r,height:i,className:"d-block mx-auto border border-secondary m-3 mw-100"}),u?o.a.createElement("canvas",{id:u.canvasId,width:u.canvasWidth,height:u.canvasHeight,className:"d-block mx-auto mw-100"}):null,a?o.a.createElement("button",{type:"button",id:"take-screenshot",className:"btn btn-primary",onClick:function(){return e.takeScreenshot()}},"Take Screenshot"):null)}}])&&h(n.prototype,r),i&&h(n,i),s}(r.Component);return t.propTypes={canvasID:u.a.string.isRequired,width:u.a.number,height:u.a.number,camera:u.a.object,models:u.a.arrayOf(u.a.shape({id:u.a.string.isRequired,src:u.a.string.isRequired})).isRequired,bcfViewpoint:u.a.object,eventToPickOn:u.a.string,navCubeSettings:u.a.shape({canvasId:u.a.string.isRequired,canvasWidth:u.a.number,canvasHeight:u.a.number}),enableScreenshot:u.a.bool},t.defaultProps={eventToPickOn:"mouseclicked"},t},_=n(6),O=n(7),j=g(_.GLTFLoaderPlugin),w=g(O.XKTLoaderPlugin),k=n(2),S=function(e,t,n){return e.reduce((function(e,r){return e[t?t(r):r]=n||r,e}),Object.create(null))},P=function(e,t){if(!e)return[];var n=[],r=(null==t?void 0:t.length)?S(t,null,!0):{};return function e(o){var i=o.type,u=o.id,a=o.children;"IfcSpace"!==i||(null==t?void 0:t.length)&&!r[u]||n.push(u),a&&a.forEach(e)}(e),n},x=function(e,t){var n=e.scene,r=e.metaScene,o=t.id,i=t.guids,u=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3?arguments[3]:void 0,c=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l=n.models[o];a[o]&&!c||(a[o]=P(r.metaModels[o].rootMetaObject,i)),a[o].forEach((function(e){var t=l._nodes[e];t&&(t.pickable=!0,t.xrayed=!1,t.visible=u)}))},C=function(e,t,n){var r=t.id,o=t.guids,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],u=e.models[r];if(null==o?void 0:o.length){var a=S(o,null,!0);n[r]=u.entityList.reduce((function(e,t){var n=!!a[t.id];return t.visible=n,n?k.math.expandAABB3(e,t.aabb):e}),k.math.collapseAABB3())}else i&&(u.visible=!0),n[r]=u.aabb},E=function(e,t,n){var r=(Object.values?Object.values(t):Object.keys(t).map((function(e){return t[e]}))).reduce(k.math.expandAABB3,k.math.collapseAABB3());n?e.cameraFlight.flyTo(r):e.cameraFlight.jumpTo(r)},A={gltf:{loader:_.GLTFLoaderPlugin},xkt:{loader:O.XKTLoaderPlugin}},T=function(e){var t=e.match(/\.(\w+)$/);return t&&t[1].toLowerCase()},I=[{label:"front",boundaries:[[7,7,4,4]],dir:[0,0,-1],up:[0,1,0]},{label:"back",boundaries:[[19,7,4,4]],dir:[0,0,1],up:[0,1,0]},{label:"right",boundaries:[[13,7,4,4]],dir:[-1,0,0],up:[0,1,0]},{label:"left",boundaries:[[1,7,4,4]],dir:[1,0,0],up:[0,1,0]},{label:"top",boundaries:[[7,1,4,4]],dir:[0,-1,0],up:[0,0,-1]},{label:"bottom",boundaries:[[7,13,4,4]],dir:[0,1,0],up:[0,0,1]}],V=function(e,t){return function(n){var r=I.find((function(e){return e.label===n}));if(t){var o=k.math.vec3(),i=e.scene.aabb,u=k.math.getAABB3Diag(i);k.math.getAABB3Center(i,o);var a=Math.abs(u/Math.tan(27.5));e.cameraFlight.flyTo({look:o,eye:[o[0]-a*r.dir[0],o[1]-a*r.dir[1],o[2]-a*r.dir[2]],up:r.up||[0,1,0],orthoScale:1.3*u,fitFOV:45,duration:.5})}}},M=function(e){var t=e.match(/#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})/i);return t?t.slice(1).map((function(e){return parseInt(e,16)/255})):[0,1,0]},R=function(e,t){e&&t&&Object.keys(e).forEach((function(n){var r=e[n];t[n]!==r&&(t[n]=r)}))};function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $=function(e,t,n){var o=Object(r.useRef)([]);return Object(r.useEffect)((function(){t?o.current=e:(o.current=[],n(!1))}),[t,e,n]),o.current},N=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:A,o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,u=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,l=Object(r.useState)(!1),s=D(l,2),d=s[0],p=s[1],h=$(t,e,p),v=Object(r.useRef)(Object.create(null)),b=Object(r.useRef)(Object.create(null)),y=function(){return c(Object.values(b.current).some((function(e){return e.length})))};return Object(r.useEffect)((function(){if(e){var r=t.map((function(e){return e.id})),c=h.map((function(e){return e.id})),l=f()(r,c),s=f()(c,r),d=f()(c,s);s.forEach((function(t){var n;null===(n=e.scene.models[t])||void 0===n||n.destroy(),delete v.current[t],delete b.current[t],y()})),(null==o?void 0:o.model.destroyed)&&i(null);var m=S(t,(function(e){return e.id})),g=S(h,(function(e){return e.id})),_=!1;if(d.forEach((function(t){var n=function(){var n=m[t],r=g[t];n.guids!==r.guids&&(_=!0,C(e.scene,n,v.current)),e.scene.models[t].xrayed=!!a||n.xrayed,e.scene.models[t].pickable=!a&&n.pickable,x(e,n,a,b.current,_),y()};v.current[t]?n():e.scene.models[t].once("loaded",n)})),o&&!o.visible&&(o.selected=!1,i(null)),!s.length&&!_||l.length||E(e,v.current,u),d.length&&!l.length||p(!1),!l.length)return;var O=l.map((function(t){return new Promise((function(r){var o,i=m[t],c=n[T(i.src)]||{},l=c.loader,s=c.dataSource;if(l){var f=(null===(o=e._plugins)||void 0===o?void 0:o.find((function(e){return e instanceof l})))||new l(e,{dataSource:s}),d=i.guids?{visible:!1}:{},p=a?{xrayed:!0,pickable:!1}:{};f.load(B(B(B({},i),d),p)).once("loaded",(function(){x(e,i,a,b.current),y(),C(e.scene,i,v.current,!1),E(e,v.current,u),r()}))}else r()}))}));Promise.all(O).then((function(){return p(!0)}))}}),[e,t,n,p,a]),d};function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var X=function(e){return e&&!e.model.destroyed&&(e.selected=!1),null},G=function(e,t){var n=U(Object(r.useState)(null),2),o=n[0],i=n[1];return Object(r.useEffect)((function(){var n,r;if(e){var o=e.scene;n=o.input.on("keydown",(function(e){return e===o.input.KEY_ESCAPE?i(X):null})),r=o.input.on(t,(function(e){var t=o.pick({canvasPos:e});i(t?function(e){return function(t){return X(t),e.selected=!0,e}}(t.entity):X)}))}return function(){if(e){var t=e.scene.input;t.off(n),t.off(r)}}}),[e,t]),Object(r.useEffect)((function(){return function(){return i(X)}}),[e]),[o,i]};function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var H=I.map((function(e){return e.label})),Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.eventToPickOn,o=void 0===n?"mouseclicked":n,i=t.loaders,u=t.xraySettings,c=t.cameraControlSettings,s=t.flyToModels,f=void 0!==s&&s,d=t.roomMode,p=void 0!==d&&d,h=Object(r.useState)(null),v=K(h,2),b=v[0],y=v[1],m=G(b,o),g=K(m,2),_=g[0],O=g[1],j=Object(r.useState)(!1),w=K(j,2),k=w[0],S=w[1],P=N(b,e,i,_,O,f,p,S);Object(r.useEffect)((function(){R(u,null==b?void 0:b.scene.xrayMaterial)}),[u,b]),Object(r.useEffect)((function(){R(c,null==b?void 0:b.cameraControl)}),[c,b]);var x=Object(r.useMemo)((function(){return{ref:function(e){return y(e?new a.Viewer({canvasElement:e}):null)}}}),[y]),C=Object(r.useMemo)((function(){return{ref:function(e){var t;return e&&b?new l.NavCubePlugin(b,{canvasElement:e}):null==b||null===(t=b.plugins)||void 0===t?void 0:t.NavCubePlugin.destroy()}}}),[b]),E=function(){if(b){var e=b.getSnapshot({format:"png"}),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","model-screenshot"),t.click()}};Object(r.useEffect)((function(){return function(){b&&(b.destroy(),S(!1))}}),[b]);var A=Object(r.useCallback)((function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e.forEach((function(e){var r=null==b?void 0:b.scene.models[e];r&&(r.xrayed=t,r.pickable=n||!t)}))}),[b]),T=Object(r.useCallback)((function(e,t){return e.forEach((function(e){var n=null==b?void 0:b.scene.models[e];n&&(n.visible=t)}))}),[b]),I=Object(r.useCallback)((function(e,t){return null==b?void 0:b.scene.setObjectsVisible(e,t)}),[b]),F=Object(r.useCallback)((function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];null==b||b.scene.setObjectsXRayed(e,t),null==b||b.scene.setObjectsPickable(e,n||!t)}),[b]),B=Object(r.useCallback)((function(e,t){return null==b?void 0:b.scene.setObjectsColorized(e,M(t))}),[b]),L=Object(r.useMemo)((function(){return b?Object.keys(b.scene.xrayMaterial.presets):[]}),[b]);return{viewerCanvasProps:x,navCubeCanvasProps:C,takeScreenshot:E,setCameraPreset:V(b,P),pickedEntity:_?{entityId:_.id,modelId:_.model.id}:{entityId:"",modelId:""},clearEntitySelection:function(){return O(X)},faces:H,setObjectsVisible:I,setObjectsColorized:B,setObjectsXRayed:F,setModelsXRayed:A,setModelsVisible:T,xrayPresets:L,modelsHaveLoaded:P,containsSpace:k}}}]);